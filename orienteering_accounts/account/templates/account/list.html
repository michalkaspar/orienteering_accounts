{% extends "base.html" %}{% load i18n forms transaction core %}

{% block main_content %}

    <h1>{% trans "Seznam účtů" %}</h1>

    <form method="get">
          <div class="row">
              <div class="col-3">
                {% form_field filter.form.registration_number %}
              </div>
              <div class="col-3">
                {% form_field filter.form.first_name %}
              </div>
              <div class="col-3">
                {% form_field filter.form.last_name %}
              </div>
          </div>
          <div class="row">
              <div class="col-3">
                {% form_field filter.form.email %}
              </div>
              <div class="col-3">
                {% form_field filter.form.is_active %}
              </div>
          </div>
         <div class="row" style="margin-top: 25px">
            <div class="col-1">
                <input class="btn btn-success" type="submit" value="{% trans "Hledat" %}">
            </div>
             <div class="col-1">
                 <a href="{% url "accounts:export" %}" class="btn btn-secondary">{% trans "Export" %}</a>
             </div>
         </div>
    </form>

    <table class="table table-striped table-bordered">
      <thead>
        <tr>
            <th scope="col"><a href="{% url "accounts:list" %}?o={% if descendant %}-{% endif %}registration_number">{% trans "Registrační číslo" %}</a></th>
            <th scope="col"><a href="{% url "accounts:list" %}?o={% if descendant %}-{% endif %}last_name">{% trans "Příjmení" %}</a></th>
            <th scope="col"><a href="{% url "accounts:list" %}?o={% if descendant %}-{% endif %}first_name">{% trans "Křestní jméno" %}</a></th>
            <th scope="col"><a href="{% url "accounts:list" %}?o={% if descendant %}-{% endif %}email">{% trans "Email" %}</a></th>
            <th scope="col"><a href="{% url "accounts:list" %}?o={% if descendant %}-{% endif %}balance">{% trans "Zůstatek" %}</a></th>
            <th scope="col"><a href="{% url "accounts:list" %}?o={% if descendant %}-{% endif %}membership_paid_to">{% trans "Příspěvky do" %}</a></th>
        </tr>
      </thead>
      <tbody>
        {% for account in filter.qs %}
        <tr>
            <td ><a href="{% url "accounts:detail" account.pk%}">{{ account.registration_number }}</a></td>
            <td>{{ account.last_name }}</td>
            <td>{{ account.first_name }}</td>
            <td>{{ account.email|default:"-" }}</td>
            <td>{% transaction_amount account.balance %}</td>
            <td>{{ account.membership_paid_to|format_date|default:"-" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
{% endblock main_content %}
